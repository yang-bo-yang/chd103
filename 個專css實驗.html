<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="reset css.css">
    <link rel="stylesheet" href="Topic2.css">
    <style>
        .carousel {
            width: 600px;
            height: 300px;

            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }

        .carousel .container {
            height: 100%;
            width: 1000px;


            position: relative;
            left: 0px;

            display: flex;

            transition: all 1s;
        }

        .carousel .container a {
            width: 100%;
            height: 100%;
            flex-shrink: 0;

        }

        .carousel .container a img {
            width: 100%;
            height: 100%;


            object-fit: cover;
        }

        .carousel .shift .btn {
            position: absolute;
            top: 0;
            bottom: 0;
            margin: auto 0;

            background-color: teal;
            color: aliceblue;

            width: 50px;
            height: 50px;
            border-radius: 8px;

            font-size: 40px;
            font-weight: bold;

            line-height: 50px;
            text-align: center;

            cursor: pointer;

            user-select: none;

            opacity: 0.5;
        }

        .bottom {
            display: flex;

            gap: 10px;
        }

        .bottom .indicator {
            height: 5px;
            width: 40px;

            background-color: teal;

            cursor: pointer;

            user-select: none;
        }

        .carousel .shift .left {
            left: 20px;
        }

        .carousel .shift .right {
            right: 20px;
        }

        .carousel .bottom {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            margin: 0 auto;
            width: max-content;
            display: flex;
            gap: 10px;
        }

        .carousel .bottom .indicator {
            height: 5px;
            width: 40px;

            background-color: teal;

            opacity: 0.5;

            cursor: pointer;
        }

        .curousel:hover .bottom .indicator {
            opacity: 1;
        }

        .curousel:hover .shift .btn {
            opacity: 1;
        }
    </style>
    <script>


        let index = 0

        let imageCount = document.querySelectorAll(
            ".carousel .container img"
        ).length

        const bottom = document.querySelect(".carousel .bottom")
        for (let i = 0; i < imageCount; i++) {





            const indicator = document.createElement("div")
            indicator.classList.add("indicator")
            indicator.onclick = () => setIndex(i)

            bottom.append(indicator)
        }

        setInterval(() => {
            index++
            refresh()
        }, 3000)

        function refresh() {
            if (index < 0) {


                index = imageCount - 1
            } else if (index >= imageCount) {


                index = 0
            }


            let carousel = document.querySelector(".carousel")

            // 注意
            let width = getComputedStyle(carousel).width
            width = Number(width.slice(0, -2))
            console.log(width)

            carousel.querySelector(".container").style.left =
                index * width * -1 + "px"
        }
        let refreshWrapper = (func) => {
            return function (...args) {
                let result = func(...args)
                refresh()
                return result
            }
        }

        let leftshift = refreshWrapper(() => {
            index--
        })
        let rightshift = refreshWrapper(() => {
            index++
        })

        let setIndex = refreshWrapper((idx) => {
            index = idx
        })
        refresh()
    </script>
</head>

<body>




    <div class="carousel">
        <div class="container">
            <a href="" target="_blank"><img src="The Plantagenets.png" alt=""></a>
            <a href="" target="_blank"><img src="The Plantagenets.png" alt=""></a>
            <a href="" target="_blank"><img src="The Plantagenets.png" alt=""></a>
        </div>
        <div class="shift">
            <button class="btn left" onclick="leftshift()">&lt;</button>
            <button class="btn right" onclick="rightshift()">&gt;</button>
        </div>
        <div class="bottom">
            <button class="indicator" onclick="setIndex(0)">0</button>
            <button class="indicator" onclick="setIndex(1)">1</button>
            <button class="indicator" onclick="setIndex(2)">2</button>
        </div>
    </div>


    <!-- <header>
        <div class="title">
            <span class="webname">The Reader 閱讀者</span>
            <nav class="toprow">
                <a href="#">使用說明</a>
                <a href="#">常見問題</a>
                <a href="#">關於我們</a>
                <a href="login.html">會員登入</a>
            </nav>
        </div>
        <div class="secondtitle">
            <div class="logo">
                <img src="logo1.png" alt="logo1">
            </div>
            <span class="the">THE</span>
            <span class="reader">Reader</span>
        </div>
        <div class="guide">
            <nav class="Classification">
                <a href="#">新書</a>
                <a href="chbook.html">中文</a>
                <a href="#">外文</a>
                <a href="#">購書</a>
            </nav>
        </div>
        <div class="search">
            <input class="searchbar" type="text" name="search" id="serach" placeholder="書名、作者">
            <button class="search-btn"><img src="search.png" alt="search" width="10px"></button>
        </div>
        <script>
            function turnoff(n) {
                var s = document.getElementById(n).style;
                s.display = (s.display == 'none') ? '' : 'none';
            }
        </script>

        <div title="展開/收起" onclick="turnoff('divturnoff');">展開/收起</div>
        <div id="divturnoff" style="display: none;">
            在英國歷史上，都鐸王朝憑借足料的八卦顯得格外搶眼，“童貞女王”、亨利八世情史，都為人津津樂道，“玫瑰戰爭”更是用一種童話式的浪漫俘獲一眾民心。
            從一個毫不起眼、來歷不明的小貴族，躍升至國王之尊，都鐸家族的崛起堪稱奇跡。

            不得不說，都鐸家的善投機和“紅皇后”的懂生存，真是個絕妙組合。 在風雨飄搖的金雀花王朝末期，都鐸家族就是憑藉這種務實的組合步步為營。 而「玫瑰戰爭」這個分外浪漫的說辭，則是都鐸家族為自己披上的最華麗外衣。
            因為都鐸家族從一開始就諳熟宣傳要義——人們愛故事，勝過愛真相。

            玫瑰戰爭的真相到底是怎樣的呢？ 廣受歡迎的丹•鐘斯在《空王冠》中大膽敘述了整個過程的來龍去脈，也提出了一些頗有見地的看法。
            眾所周知，丹•鐘斯是專攻中世紀史的歷史學家，這本《空王冠》也可以說是《金雀花王朝》的續集。
        </div> -->
</body>

</html>